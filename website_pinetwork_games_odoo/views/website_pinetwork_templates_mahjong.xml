<?xml version="1.0" encoding="utf-8"?>
<odoo>

        <template id="mahjong" name="Mahjong">
            <t t-call="web.layout">
            &lt;!DOCTYPE html&gt;
            <html>

                <meta http-equiv="content-type" content="text/html;charset=UTF-8" />

                <head>
                    <meta charset="UTF-8" />
                    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

                    <title>Mahjong</title>
                    <meta name="description" content="Mahjong" />

                    <meta property="og:url" content="/mahjong"/>
                    <meta property="og:type" content="website"/>
                    <meta property="og:title" content="Mahjong"/>
                    <meta property="og:description" content="Mahjong"/>

                    <link href="/website_pinetwork_games_odoo/static/src/img/latin-chain-logo.jpeg" rel="shortcut icon" />
                    
                    <link rel="stylesheet" href="/website_pinetwork_games_odoo/static/src/mahjong-solitaire/style.css?v=1.102" />
                    
                    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"/>
                    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
                    
                    <!--<script type="text/javascript">
                      window._taboola = window._taboola || [];
                      _taboola.push({article:'auto'});
                      !function (e, f, u, i) {
                        if (!document.getElementById(i)){
                          e.async = 1;
                          e.src = u;
                          e.id = i;
                          f.parentNode.insertBefore(e, f);
                        }
                      }(document.createElement('script'),
                      document.getElementsByTagName('script')[0],
                      '//cdn.taboola.com/libtrc/latinchain-publisher/loader.js',
                      'tb_loader_script');
                      if(window.performance &amp;&amp; typeof window.performance.mark == 'function')
                        {window.performance.mark('tbl_ic');}
                    </script>-->
                    
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
                    
                    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
                    
                    <script type="text/javascript">
                        const Pi = window.Pi;
                        $( document ).ready(function() {
                            Pi.init({ version: "2.0", sandbox: $("#sandbox").val() });
                            var pi_user_id = "";
                            async function auth() {
                                try {
                                    // Identify the user with their username / unique network-wide ID, and  qget permission to request payments from them.
                                    const scopes = ['username', 'payments', 'wallet_address'];
                                    function onIncompletePaymentFound(payment) {
                                        
                                    }; // Read more about this in the SDK reference
                                    
                                    Pi.authenticate(scopes, onIncompletePaymentFound).then(function(auth) {
                                        pi_user_id = auth.user.uid;
                                        
                                        document.getElementById('blockingOverlay').style.display = 'none';
                                    }).catch(function(error) {
                                        //Pi.openShareDialog("Error", error);
                                        //alert(err);
                                        console.error(error);
                                    });
                                } catch (err) {
                                    //Pi.openShareDialog("Error", err);
                                    //alert(err);
                                    console.error(err);
                                    // Not able to fetch the user
                                }
                            }
                            
                            auth();
                            
                            setTimeout(function ()
                            {
                                if(pi_user_id == "")
                                {
                                    auth();
                                    
                                    setTimeout(function ()
                                    {
                                        if(pi_user_id == "")
                                        {
                                            //alert($("#pi_prowser_message").text());
                                            
                                            if(window.location.hostname == "localhost")
                                            {
                                                $("a.anchor-click").attr('href', window.location.origin);
                                            }
                                            else if(window.location.hostname == "test.latin-chain.com")
                                            {
                                                $("a.anchor-click").attr('href', "https://latinchaintest9869.pinet.com");
                                            }
                                            else
                                            {
                                                $("a.anchor-click").attr('href', "https://latinchain.pinet.com");
                                            }
                                            
                                            document.getElementById('blockingOverlay').style.display = 'flex'; // Use 'flex' instead of 'block'
                                            document.getElementById('blocking-message').style.display = 'block'; // Use 'flex' instead of 'block'
                                            document.getElementById('loading-message').style.display = 'none'; // Use 'flex' instead of 'block'
                                        }
                                    }, 10000);
                                }
                            }, 10000);                        
                        });
                    </script>
                    
                    <div id="blockingOverlay" style="display: flex; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.7); z-index: 9999; justify-content: center; align-items: center;">
                        <div style="display: flex; background-color: white; padding: 30px; border-radius: 10px; text-align: center; font-family: Arial, sans-serif; font-size: 24px; color: #333;">
                            <div id="blocking-message" style="display: none;">
                                <div>
                                    Go to Pi Browser
                                </div>
                                <div>
                                    <a class="anchor-click" style="color: blue;" href="#" target="_blank">Click here</a>
                                </div>
                            </div>
                            <div id="loading-message" style="display: block;">
                                Loading...
                            </div>
                        </div>
                    </div>
                    <input type="hidden" id="sandbox" t-att-value="sandbox"/>
                    <input type="hidden" id="mainnet" t-att-value="mainnet"/>
                    <div id="pi_prowser_message" style="display:none;">You need to access from Pi Browser.</div>

                </head>

                <body bgcolor="#ffffff" style="text-align: center; max-height: 120% !important;">
                    <header>Mahjong solitaire</header>
                    
                    <a id="back" class="btn btn-info back" style="margin-bottom:15px;" href="/"><i class="fa fa-step-backward"></i></a>

                    <div id="wrapper">
                        <main>
                            <section id="game"></section>
                        </main>
                
                        <footer>
                            <span style="filter: contrast(100%) !important; background-color: blue; color: white" id="statusText"></span>
                            <span id="controls">
                                <button style="filter: contrast(100%) !important;" class="mahjong_button" id="hintButton">Hint</button>
                                <button style="filter: contrast(100%) !important;" class="mahjong_button" id="restartButton">Restart</button>
                            </span>
                        </footer>
                    </div>
                    
                    <script src="/website_pinetwork_games_odoo/static/src/mahjong-solitaire/main.js" type="module"></script>
                </body>
                
                <div>
                    <br/><br/><br/><br/><br/><br/><br/><br/><br/>
                </div>
                
                <style>
                    /*.darkmode-toggle {
                        display: none !important;
                    }
                    .darkmode-layer {
                        display: none !important;
                    }*/
                    
                    .darkmode--activated #game {
                        filter: contrast(100%) !important;
                    }
                    
                    #game {
                        filter: contrast(100%) !important;
                    }
                </style>

                </html>
                </t>
		</template>

</odoo>
